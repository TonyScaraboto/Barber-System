---
import { getUserRole, getDashboardPath } from '../lib/types';
import { getAuth } from '@clerk/astro/server';

const { userId } = await getAuth(Astro);

// Redireciona se não estiver autenticado
if (!userId) {
  return Astro.redirect('/login');
}

// Determina o role do usuário e redireciona para o dashboard apropriado
const userRole = getUserRole(userId);
const dashboardPath = getDashboardPath(userRole);

return Astro.redirect(dashboardPath);
---
